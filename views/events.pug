extends layout

block content
  .container-fluid
    form
      table.table.table-striped.table-sm.table-bordered.table-responsive
        thead
          tr
            td.w-25 Info
            td.w-25 Artists
            td.w-25 Blurb
            td.w-25 URLs
        tbody
          each val, evtidx in events
            if val 
              tr
                td
                  .form-check
                    input(type="checkbox" class="form-check-input" id=`keep[${evtidx}]` checked)
                    label(class="form-check-label" for="keep")
                      span.text-nowrap= val.activity_startDate
                      br
                      span.text-nowrap= val.activity_Time
                      br
                      span.text-nowrap= val.venue_Name
                      br
                      ul.list-unstyled
                        for orig_artist in val.orig_artists 
                          li= orig_artist.name
                td
                  ul.list-unstyled
                    each artist, index in val.artists 
                      - let even = index % 2 === 0
                      li(class=even ? 'bg-light' : 'bg-transparent')
                        if artist.best 
                          .form-check
                            input(type="checkbox" class="form-check-input" id=`artistid[${evtidx}][${index}]` value=artist.id checked)
                            label(class="form-check-label text-success" for=`artistid[${evtidx}][${index}]`)= artist.dbname
                        else if artist.dbname !== ''
                          .form-check
                            input(type="checkbox" class="form-check-input" id=`artistid[${evtidx}][${index}]` value=artist.id)
                            label(class="form-check-label text-info" for=`artistid[${evtidx}][${index}]`)= artist.dbname
                        else
                          .row
                            label(class="form-check-label col-sm-4" for=`addone[${evtidx}][${index}]`) add 
                            .col-sm-8
                              input(type="checkbox" class="form-check-input" id=`addone[${evtidx}][${index}]`)
                          .row
                            label(for=`newartistname[${evtidx}][${index}]` class='col-sm-4 col-form-label') Artist Name
                            .col-sm-8
                              input(class='form-control-sm' type='text' id=`newartistname[${evtidx}][${index}]` value=artist.origname)
                          .row
                            label(for=`newartist_twitter[${evtidx}][${index}]` class='col-sm-4 col-form-label') Artist Twitter
                            .col-sm-8
                              input(class='form-control-sm' type='text' id=`newartist_twitter[${evtidx}][${index}]`)
                          .row
                            label(for=`newartist_url[${evtidx}][${index}]` class='col-sm-4 col-form-label') Artist URL
                            .col-sm-8
                              input(class='form-control-sm' type='text' id=`newartist_url[${evtidx}][${index}]`)
                    - let even = val.artists.length % 2 === 0
                    li(class=even ? 'bg-light' : 'bg-transparent')
                      .row
                        label(class="form-check-label col-sm-4" for=`addone[${evtidx}]`) add 
                        .col-sm-8
                          input(type="checkbox" class="form-check-input" id=`addone[${evtidx}]`)
                      .row
                        label(for=`newartistname[${evtidx}]` class='col-sm-4 col-form-label') Artist Name
                        .col-sm-8
                          input(class='form-control-sm' type='text' id=`newartistname[${evtidx}]`)
                      .row
                        label(for=`newartist_twitter[${evtidx}]` class='col-sm-4 col-form-label') Artist Twitter
                        .col-sm-8
                          input(class='form-control-sm' type='text' id=`newartist_twitter[${evtidx}]`)
                      .row
                        label(for=`newartist_url[${evtidx}]` class='col-sm-4 col-form-label') Artist URL
                        .col-sm-8
                          input(class='form-control-sm' type='text' id=`newartist_url[${evtidx}]`)
                td
                  textarea(class='form-control-sm' id=`blurb[${evtidx}]` rows='3')= val.activity_Blurb
                td
                  if val.urls.length > 0
                    ul.list-unstyled
                      for url in val.urls 
                        li.text-break= url
